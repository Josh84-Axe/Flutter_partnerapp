// Generated by DDC, the Dart Development Compiler (to JavaScript).
// Version: 3.10.0 (stable) (Thu Nov 6 05:24:55 2025 -0800) on "windows_x64"
// Module: packages/async/src/sink_base.dart
// Flags: canary, emitLibraryBundle, enableAsserts(true)
dartDevEmbedder.defineLibrary("package:async/src/sink_base.dart", (function load__package$58async__src__sink_base_dart(sink_base) {
  'use strict';
  let core = dartDevEmbedder.importLibrary("dart:core", function(lib) {
    core = lib;
  });
  let dart = dartDevEmbedder.importLibrary("dart:_runtime", function(lib) {
    dart = lib;
  });
  let dart_rti = dartDevEmbedder.importLibrary("dart:_rti", function(lib) {
    dart_rti = lib;
  });
  let async = dartDevEmbedder.importLibrary("dart:async", function(lib) {
    async = lib;
  });
  let convert = dartDevEmbedder.importLibrary("dart:convert", function(lib) {
    convert = lib;
  });
  let async_memoizer = dartDevEmbedder.importLibrary("package:async/src/async_memoizer.dart", function(lib) {
    async_memoizer = lib;
  });
  let dartx = dartDevEmbedder.importLibrary("dartx", function(lib) {
    dartx = lib;
  });
  var $isEmpty = dartx.isEmpty;
  var T = {
    AsyncMemoizerOfvoid: () => (T.AsyncMemoizerOfvoid = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "async__src__async_memoizer|AsyncMemoizer<~>", true)))(),
    void: () => (T.void = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "~", true)))(),
    bool: () => (T.bool = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "core|bool", true)))(),
    ObjectNTovoid: () => (T.ObjectNTovoid = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "~(core|Object?)", true)))(),
    ObjectAndStackTraceNTovoid: () => (T.ObjectAndStackTraceNTovoid = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "~(core|Object[core|StackTrace?])", true)))(),
    VoidToFutureOfvoid: () => (T.VoidToFutureOfvoid = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "async|Future<~>()", true)))(),
    VoidTovoid: () => (T.VoidTovoid = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "~()", true)))(),
    CompleterOfvoid: () => (T.CompleterOfvoid = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "async|Completer<~>", true)))(),
    FutureOfvoid: () => (T.FutureOfvoid = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "async|Future<~>", true)))(),
    ObjectNToFutureOfvoid: () => (T.ObjectNToFutureOfvoid = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "async|Future<~>(core|Object?)", true)))(),
    VoidToNull: () => (T.VoidToNull = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "core|Null()", true)))(),
    IterableOfObjectNAndStringTovoid: () => (T.IterableOfObjectNAndStringTovoid = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "~(core|Iterable<core|Object?>[core|String])", true)))(),
    ObjectNTovoid$1: () => (T.ObjectNTovoid$1 = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "~([core|Object?])", true)))(),
    intTovoid: () => (T.intTovoid = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "~(core|int)", true)))(),
    Encoding: () => (T.Encoding = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "convert|Encoding", true)))()
  };
  const CT = Object.create({
    _: () => (C, CT)
  });
  dart.defineLazy(CT, {
    get C0() {
      return C[0] = dart.const(Object.setPrototypeOf({
        [Utf8Codec__allowMalformed]: false
      }, convert.Utf8Codec.prototype));
    }
  });
  var C = [void 0];
  var I = [
    "package:async/src/sink_base.dart",
    "package:async/src/async_memoizer.dart",
    "dart:core",
    "dart:convert"
  ];
  var _closeMemo = dart.privateName("package:async/src/sink_base.dart", "_closeMemo");
  var _closed = dart.privateName("package:async/src/sink_base.dart", "_closed");
  var _eval = dart.privateName("dart:_rti", "_eval");
  var _as = dart.privateName("dart:_rti", "_as");
  var _checkCanAddEvent = dart.privateName("package:async/src/sink_base.dart", "_checkCanAddEvent");
  dart.declareClass(sink_base, 'EventSinkBase', class EventSinkBase {
    get [_closed]() {
      return this[_closeMemo].hasRun;
    }
    add(data) {
      dart_rti.instanceType(this)[_eval]("EventSinkBase.T")[_as](data);
      this[_checkCanAddEvent]();
      this.onAdd(data);
    }
    addError(error, stackTrace = null) {
      this[_checkCanAddEvent]();
      this.onError(error, stackTrace);
    }
    close() {
      return this[_closeMemo].runOnce(dart.tearoff(this, null, 'onClose'));
    }
    [_checkCanAddEvent]() {
      if (this[_closed]) dart.throw(new core.StateError.new("Cannot add event after closing"));
    }
  });
  (sink_base.EventSinkBase.new = function(_ti) {
    this.$ti = this.$ti || _ti || dart.getReifiedType(this);
    this[_closeMemo] = new async_memoizer.AsyncMemoizer.new(T.AsyncMemoizerOfvoid());
    ;
  }).prototype = sink_base.EventSinkBase.prototype;
  dart.addRtiResources(sink_base.EventSinkBase, ["async__src__sink_base|EventSinkBase", "async|EventSink", "core|Sink"]);
  dart.setMethodSignature(sink_base.EventSinkBase, () => dart.global.Object.setPrototypeOf({
    add: _ti => T.ObjectNTovoid(),
    addError: _ti => T.ObjectAndStackTraceNTovoid(),
    close: _ti => T.VoidToFutureOfvoid(),
    [_checkCanAddEvent]: _ti => T.VoidTovoid()
  }, dart.getMethods(dart.global.Object.getPrototypeOf(sink_base.EventSinkBase))));
  dart.setMethodsImmediateTargetSignature(sink_base.EventSinkBase, () => dart.global.Object.setPrototypeOf({
    add: "package:async/src/sink_base.dart:EventSinkBase",
    addError: "package:async/src/sink_base.dart:EventSinkBase",
    close: "package:async/src/sink_base.dart:EventSinkBase",
    [_checkCanAddEvent]: "package:async/src/sink_base.dart:EventSinkBase"
  }, dart.getMethodsImmediateTargets(dart.global.Object.getPrototypeOf(sink_base.EventSinkBase))));
  dart.setGetterSignature(sink_base.EventSinkBase, () => dart.global.Object.setPrototypeOf({
    [_closed]: _ti => T.bool()
  }, dart.getGetters(dart.global.Object.getPrototypeOf(sink_base.EventSinkBase))));
  dart.setLibraryUri(sink_base.EventSinkBase, I[0]);
  dart.setFieldSignature(sink_base.EventSinkBase, () => dart.global.Object.setPrototypeOf({[_closeMemo]: {
      type: _ti => T.AsyncMemoizerOfvoid(),
      isConst: false,
      isFinal: true,
      libraryUri: I[1]
    }}, dart.getFields(dart.global.Object.getPrototypeOf(sink_base.EventSinkBase))));
  var _addingStream = dart.privateName("package:async/src/sink_base.dart", "_addingStream");
  let _StreamSinkBase = class StreamSinkBase {
    get done() {
      return this[_closeMemo].future;
    }
    addStream(stream) {
      dart_rti.instanceType(this)[_eval]("async|Stream<StreamSinkBase.T>")[_as](stream);
      this[_checkCanAddEvent]();
      this[_addingStream] = true;
      let completer = async.Completer.sync(T.CompleterOfvoid());
      stream.listen(dart.tearoff(this, null, 'onAdd'), {onError: dart.tearoff(this, null, 'onError'), onDone: dart.fn(() => {
          let $36rec, $36result;
          0 === dart.global.dartDevEmbedder.hotReloadGeneration ? this[_addingStream] = false : dart.dput(this, _addingStream, false);
          0 === dart.global.dartDevEmbedder.hotReloadGeneration ? completer.complete() : ($36rec = completer, $36result = dart.hotReloadCorrectnessChecks($36rec, 'complete', [], [], null), $36result == dart.validArgumentsSentinel ? $36rec.complete() : $36result);
        }, T.VoidTovoid())});
      return completer.future;
    }
    close() {
      if (this[_addingStream]) dart.throw(new core.StateError.new("StreamSink is bound to a stream"));
      return super.close();
    }
    [_checkCanAddEvent]() {
      super[_checkCanAddEvent]();
      if (this[_addingStream]) dart.throw(new core.StateError.new("StreamSink is bound to a stream"));
    }
  };
  dart.declareClass(sink_base, 'StreamSinkBase', _StreamSinkBase);
  (sink_base.StreamSinkBase.new = function(_ti) {
    this.$ti = this.$ti || _ti || dart.getReifiedType(this);
    this[_addingStream] = false;
    dart.global.Object.getPrototypeOf(sink_base.StreamSinkBase).new.call(this, null);
    ;
  }).prototype = sink_base.StreamSinkBase.prototype;
  dart.addRtiResources(sink_base.StreamSinkBase, ["async__src__sink_base|StreamSinkBase", "async|StreamSink", "async|EventSink", "async|StreamConsumer", "core|Sink"]);
  dart.setMethodSignature(sink_base.StreamSinkBase, () => dart.global.Object.setPrototypeOf({
    addStream: _ti => T.ObjectNToFutureOfvoid()
  }, dart.getMethods(dart.global.Object.getPrototypeOf(sink_base.StreamSinkBase))));
  dart.setMethodsImmediateTargetSignature(sink_base.StreamSinkBase, () => dart.global.Object.setPrototypeOf({
    addStream: "package:async/src/sink_base.dart:StreamSinkBase",
    close: "package:async/src/sink_base.dart:StreamSinkBase",
    [_checkCanAddEvent]: "package:async/src/sink_base.dart:StreamSinkBase"
  }, dart.getMethodsImmediateTargets(dart.global.Object.getPrototypeOf(sink_base.StreamSinkBase))));
  dart.setGetterSignature(sink_base.StreamSinkBase, () => dart.global.Object.setPrototypeOf({
    done: _ti => T.FutureOfvoid()
  }, dart.getGetters(dart.global.Object.getPrototypeOf(sink_base.StreamSinkBase))));
  dart.setLibraryUri(sink_base.StreamSinkBase, I[0]);
  dart.setFieldSignature(sink_base.StreamSinkBase, () => dart.global.Object.setPrototypeOf({[_addingStream]: {
      type: _ti => T.bool(),
      isConst: false,
      isFinal: false,
      libraryUri: I[2]
    }}, dart.getFields(dart.global.Object.getPrototypeOf(sink_base.StreamSinkBase))));
  var encoding = dart.privateName("package:async/src/sink_base.dart", "IOSinkBase.encoding");
  var Utf8Codec__allowMalformed = dart.privateName("dart:convert", "Utf8Codec._allowMalformed");
  dart.declareClass(sink_base, 'IOSinkBase', class IOSinkBase {
    get encoding() {
      if (this[encoding] === void 0) {
        this[encoding] = null;
      }
      return this[encoding];
    }
    set encoding(value) {
      this[encoding] = value;
    }
    flush() {
      if (this[_addingStream]) dart.throw(new core.StateError.new("StreamSink is bound to a stream"));
      if (this[_closed]) return async.Future.value(T.FutureOfvoid());
      this[_addingStream] = true;
      return this.onFlush().whenComplete(dart.fn(() => {
        0 === dart.global.dartDevEmbedder.hotReloadGeneration ? this[_addingStream] = false : dart.dput(this, _addingStream, false);
      }, T.VoidToNull()));
    }
    write(object) {
      let string = dart.toString(object);
      if (string[$isEmpty]) return;
      this.add(this.encoding.encode(string));
    }
    writeAll(objects, separator = "") {
      let first = true;
      for (let object of objects) {
        if (first) {
          first = false;
        } else {
          this.write(separator);
        }
        this.write(object);
      }
    }
    writeln(object = "") {
      this.write(object);
      this.write("\n");
    }
    writeCharCode(charCode) {
      this.write(core.String.fromCharCode(charCode));
    }
  });
  (sink_base.IOSinkBase.new = function(_ti, encoding$ = C[0] || CT.C0) {
    this.$ti = this.$ti || _ti || dart.getReifiedType(this);
    this[encoding] = encoding$;
    dart.global.Object.getPrototypeOf(sink_base.IOSinkBase).new.call(this, null);
    ;
  }).prototype = sink_base.IOSinkBase.prototype;
  dart.addRtiResources(sink_base.IOSinkBase, ["async__src__sink_base|IOSinkBase"]);
  dart.setMethodSignature(sink_base.IOSinkBase, () => dart.global.Object.setPrototypeOf({
    flush: _ti => T.VoidToFutureOfvoid(),
    write: _ti => T.ObjectNTovoid(),
    writeAll: _ti => T.IterableOfObjectNAndStringTovoid(),
    writeln: _ti => T.ObjectNTovoid$1(),
    writeCharCode: _ti => T.intTovoid()
  }, dart.getMethods(dart.global.Object.getPrototypeOf(sink_base.IOSinkBase))));
  dart.setMethodsImmediateTargetSignature(sink_base.IOSinkBase, () => dart.global.Object.setPrototypeOf({
    flush: "package:async/src/sink_base.dart:IOSinkBase",
    write: "package:async/src/sink_base.dart:IOSinkBase",
    writeAll: "package:async/src/sink_base.dart:IOSinkBase",
    writeln: "package:async/src/sink_base.dart:IOSinkBase",
    writeCharCode: "package:async/src/sink_base.dart:IOSinkBase"
  }, dart.getMethodsImmediateTargets(dart.global.Object.getPrototypeOf(sink_base.IOSinkBase))));
  dart.setLibraryUri(sink_base.IOSinkBase, I[0]);
  dart.setFieldSignature(sink_base.IOSinkBase, () => dart.global.Object.setPrototypeOf({encoding: {
      type: _ti => T.Encoding(),
      isConst: false,
      isFinal: false,
      libraryUri: I[3]
    }}, dart.getFields(dart.global.Object.getPrototypeOf(sink_base.IOSinkBase))));
  (function() {
  }).prototype = sink_base;
  dart.moduleConstCaches.set("packages/async/src/sink_base.dart", C);
  sink_base[dartDevEmbedder.linkSymbol] = function link__sink_base() {
    dart.classExtends(sink_base.EventSinkBase, dartDevEmbedder.importLibrary("dart:core").Object);
    dart.classExtends(_StreamSinkBase, dartDevEmbedder.importLibrary("package:async/src/sink_base.dart").EventSinkBase);
    dart.classExtends(sink_base.StreamSinkBase, dartDevEmbedder.importLibrary("package:async/src/sink_base.dart").EventSinkBase);
    dart.classExtends(sink_base.IOSinkBase, dartDevEmbedder.importLibrary("package:async/src/sink_base.dart").StreamSinkBase);
    dart_rti._Universe.addRules(dart.typeUniverse, JSON.parse('{"async__src__async_memoizer|AsyncMemoizer":{"AsyncMemoizer.T":"1"},"async|Future":{"Future.T":"1"},"async|Stream":{"Stream.T":"1"},"async|Completer":{"Completer.T":"1"},"core|Iterable":{"Iterable.E":"1"},"core|String":{"Comparable.T":"core|String","core|Comparable":["core|String"],"core|Pattern":[]},"core|Comparable":{"Comparable.T":"1"},"core|int":{"core|num":[],"Comparable.T":"core|num","core|Comparable":["core|num"]},"core|num":{"Comparable.T":"core|num","core|Comparable":["core|num"]},"convert|Encoding":{"Codec.S":"core|String","Codec.T":"core|List<core|int>","convert|Codec":["core|String","core|List<core|int>"]},"convert|Codec":{"Codec.S":"1","Codec.T":"2"},"core|List":{"List.E":"1","Iterable.E":"1","core|Iterable":["1"],"_ListIterable.E":"1","core|_ListIterable":["1"],"EfficientLengthIterable.T":"1","_internal|EfficientLengthIterable":["1"],"HideEfficientLengthIterable.T":"1","_internal|HideEfficientLengthIterable":["1"]},"core|_ListIterable":{"_ListIterable.E":"1","EfficientLengthIterable.T":"1","_internal|EfficientLengthIterable":["1"],"HideEfficientLengthIterable.T":"1","_internal|HideEfficientLengthIterable":["1"],"Iterable.E":"1","core|Iterable":["1"]},"_internal|EfficientLengthIterable":{"EfficientLengthIterable.T":"1","Iterable.E":"1","core|Iterable":["1"]},"_internal|HideEfficientLengthIterable":{"HideEfficientLengthIterable.T":"1","Iterable.E":"1","core|Iterable":["1"]},"async__src__sink_base|EventSinkBase":{"EventSinkBase.T":"1","EventSink.T":"1","async|EventSink":["1"],"Sink.T":"1","core|Sink":["1"]},"async|EventSink":{"EventSink.T":"1","Sink.T":"1","core|Sink":["1"]},"core|Sink":{"Sink.T":"1"},"async__src__sink_base|StreamSinkBase":{"StreamSinkBase.T":"1","EventSinkBase.T":"1","async__src__sink_base|EventSinkBase":["1"],"StreamSink.S":"1","async|StreamSink":["1"],"EventSink.T":"1","async|EventSink":["1"],"StreamConsumer.S":"1","async|StreamConsumer":["1"],"Sink.T":"1","core|Sink":["1"]},"async|StreamSink":{"StreamSink.S":"1","EventSink.T":"1","async|EventSink":["1"],"StreamConsumer.S":"1","async|StreamConsumer":["1"],"Sink.T":"1","core|Sink":["1"]},"async|StreamConsumer":{"StreamConsumer.S":"1"},"async__src__sink_base|IOSinkBase":{"StreamSinkBase.T":"core|List<core|int>","async__src__sink_base|StreamSinkBase":["core|List<core|int>"],"EventSinkBase.T":"core|List<core|int>","async__src__sink_base|EventSinkBase":["core|List<core|int>"],"StreamSink.S":"core|List<core|int>","async|StreamSink":["core|List<core|int>"],"EventSink.T":"core|List<core|int>","async|EventSink":["core|List<core|int>"],"StreamConsumer.S":"core|List<core|int>","async|StreamConsumer":["core|List<core|int>"],"Sink.T":"core|List<core|int>","core|Sink":["core|List<core|int>"]}}'));
  };
  sink_base[dart.libraryImportUri] = "package:async/src/sink_base.dart";
  return sink_base;
}));
dartDevEmbedder.debugger.setSourceMap("packages/async/src/sink_base.dart", '{"version":3,"sourceRoot":"","sources":["sink_base.dart"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmBsB,YAAA,AAAW;IAAM;QAG1B;;AACT;AACA,iBAAM,IAAI;IACZ;aAOqB,OAAoB;AACvC;AACA,mBAAQ,KAAK,EAAE,UAAU;IAC3B;;AAOwB,YAAA,AAAW,uCAAQ;IAAQ;;AAajD,UAAI,eAAS,WAAM,wBAAW;IAChC;;;;IAbM,mBAAa;;EAcrB;;;;;;;;;;;;;;;;;;;;;;;;;;;AAc2B,YAAA,AAAW;IAAM;cAGT;;AAC/B;AAEA,4BAAgB;AACZ,sBAAY;AACT,MAAP,MAAM,qBAAQ,6CAAgB,gCAAiB;;kEAC7C,sBAAgB,kBAAhB,qBAAgB;kEAChB,AAAU,SAAD,eAAC,SAAV,SAAS,4HAAC;;AAEZ,YAAO,AAAU,UAAD;IAClB;;AAIE,UAAI,qBAAe,WAAM,wBAAW;AACpC,YAAa;IACf;;AAIQ;AACN,UAAI,qBAAe,WAAM,wBAAW;IACtC;;;;;IA5BK,sBAAgB;;;EA6BvB;;;;;;;;;;;;;;;;;;;;;;;IAcW;;;;;;;;;;AAcP,UAAI,qBAAe,WAAM,wBAAW;AACpC,UAAI,eAAS,MAAc;AAE3B,4BAAgB;AAChB,YAAO,AAAU,6BAAa;gEAC5B,sBAAgB,kBAAhB,qBAAgB;;IAEpB;UAQmB;AACb,mBAAgB,cAAP,MAAM;AACnB,UAAI,AAAO,MAAD,YAAU;AACpB,eAAI,AAAS,qBAAO,MAAM;IAC5B;aAGgC,SAAiB;AAC3C,kBAAQ;AACZ,eAAS,SAAU,QAAO;AACxB,YAAI,KAAK;AACP,kBAAQ;;AAER,qBAAM,SAAS;;AAGjB,mBAAM,MAAM;;IAEhB;YAGsB;AACpB,iBAAM,MAAM;AACZ,iBAAM;IACR;kBAGuB;AACrB,iBAAa,yBAAa,QAAQ;IACpC;;4CAxDiB;;;AAAjB;;EAAkC","file":"../../../../../../../../../../../packages/async/src/sink_base.dart.lib.js"}');

//# sourceMappingURL=sink_base.dart.lib.js.map
