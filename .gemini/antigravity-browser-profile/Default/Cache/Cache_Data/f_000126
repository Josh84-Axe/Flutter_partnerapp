// Generated by DDC, the Dart Development Compiler (to JavaScript).
// Version: 3.10.0 (stable) (Thu Nov 6 05:24:55 2025 -0800) on "windows_x64"
// Module: packages/string_scanner/src/line_scanner.dart
// Flags: canary, emitLibraryBundle, enableAsserts(true)
dartDevEmbedder.defineLibrary("package:string_scanner/src/line_scanner.dart", (function load__package$58string_scanner__src__line_scanner_dart(line_scanner) {
  'use strict';
  let core = dartDevEmbedder.importLibrary("dart:core", function(lib) {
    core = lib;
  });
  let dart = dartDevEmbedder.importLibrary("dart:_runtime", function(lib) {
    dart = lib;
  });
  let dart_rti = dartDevEmbedder.importLibrary("dart:_rti", function(lib) {
    dart_rti = lib;
  });
  let utils = dartDevEmbedder.importLibrary("package:string_scanner/src/utils.dart", function(lib) {
    utils = lib;
  });
  let string_scanner = dartDevEmbedder.importLibrary("package:string_scanner/src/string_scanner.dart", function(lib) {
    string_scanner = lib;
  });
  let dartx = dartDevEmbedder.importLibrary("dartx", function(lib) {
    dartx = lib;
  });
  var $substring = dartx.substring;
  var $length = dartx.length;
  var $isEmpty = dartx.isEmpty;
  var $last = dartx.last;
  var $lastIndexOf = dartx.lastIndexOf;
  var $_get = dartx._get;
  var $toList = dartx.toList;
  var $endsWith = dartx.endsWith;
  var $removeLast = dartx.removeLast;
  var T = {
    String__ToLineScanner: () => (T.String__ToLineScanner = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "string_scanner__src__line_scanner|LineScanner(core|String{position:core|int?,sourceUrl:core|Object?})", true)))(),
    int: () => (T.int = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "core|int", true)))(),
    LineScannerState: () => (T.LineScannerState = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "string_scanner__src__line_scanner|LineScannerState", true)))(),
    bool: () => (T.bool = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "core|bool", true)))(),
    intTovoid: () => (T.intTovoid = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "~(core|int)", true)))(),
    String__ToListOfMatch: () => (T.String__ToListOfMatch = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "core|List<core|Match>(core|String{endPosition!core|int})", true)))(),
    LineScannerAndintAndint__ToLineScannerState: () => (T.LineScannerAndintAndint__ToLineScannerState = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "string_scanner__src__line_scanner|LineScannerState(string_scanner__src__line_scanner|LineScanner,core|int,core|int,core|int)", true)))(),
    LineScanner: () => (T.LineScanner = dart.constFn(dart_rti._Universe.eval(dart.typeUniverse, "string_scanner__src__line_scanner|LineScanner", true)))()
  };
  const CT = Object.create({
    _: () => (C, CT)
  });
  var I = [
    "package:string_scanner/src/line_scanner.dart",
    "dart:core"
  ];
  var _line = dart.privateName("package:string_scanner/src/line_scanner.dart", "_line");
  var _column = dart.privateName("package:string_scanner/src/line_scanner.dart", "_column");
  var _betweenCRLF = dart.privateName("package:string_scanner/src/line_scanner.dart", "_betweenCRLF");
  var _scanner = dart.privateName("package:string_scanner/src/line_scanner.dart", "_scanner");
  var _newlinesIn = dart.privateName("package:string_scanner/src/line_scanner.dart", "_newlinesIn");
  var _adjustLineAndColumn = dart.privateName("package:string_scanner/src/line_scanner.dart", "_adjustLineAndColumn");
  let _LineScanner = class LineScanner {
    get line() {
      return this[_line];
    }
    get column() {
      return this[_column];
    }
    get state() {
      return new line_scanner.LineScannerState.__(this, this.position, this.line, this.column);
    }
    get [_betweenCRLF]() {
      return this.peekChar(-1) === 13 && this.peekChar() === 10;
    }
    set state(state) {
      if (state[_scanner] !== this) {
        dart.throw(new core.ArgumentError.new("The given LineScannerState was not returned by this LineScanner."));
      }
      super.position = state.position;
      this[_line] = state.line;
      this[_column] = state.column;
    }
    set position(newPosition) {
      if (newPosition === this.position) {
        return;
      }
      let oldPosition = this.position;
      super.position = newPosition;
      if (newPosition === 0) {
        this[_line] = 0;
        this[_column] = 0;
      } else if (newPosition > oldPosition) {
        let newlines = this[_newlinesIn](this.string[$substring](oldPosition, newPosition), {endPosition: newPosition});
        this[_line] = this[_line] + newlines[$length];
        if (newlines[$isEmpty]) {
          this[_column] = this[_column] + (newPosition - oldPosition);
        } else {
          let offsetOfLastNewline = oldPosition + newlines[$last].end;
          this[_column] = newPosition - offsetOfLastNewline;
        }
      } else if (newPosition < oldPosition) {
        let newlines$ = this[_newlinesIn](this.string[$substring](newPosition, oldPosition), {endPosition: oldPosition});
        this[_line] = this[_line] - newlines$[$length];
        if (newlines$[$isEmpty]) {
          this[_column] = this[_column] - (oldPosition - newPosition);
        } else {
          let crOffset = this[_betweenCRLF] ? -1 : 0;
          let currentCharOffset = -1;
          let lastNewline = this.string[$lastIndexOf](line_scanner._newlineRegExp, newPosition + -1 + crOffset);
          let offsetAfterLastNewline = lastNewline === -1 ? 0 : this.string[$_get](lastNewline) === "\r" && this.string[$_get](lastNewline + 1) === "\n" ? lastNewline + 2 : lastNewline + 1;
          this[_column] = newPosition - offsetAfterLastNewline;
        }
      }
    }
    get position() {
      return super.position;
    }
    static ['_#new#tearOff'](string, opts) {
      let sourceUrl = opts && 'sourceUrl' in opts ? opts.sourceUrl : null;
      let position = opts && 'position' in opts ? opts.position : null;
      return new line_scanner.LineScanner.new(string, {sourceUrl: sourceUrl, position: position});
    }
    scanChar(character) {
      if (!super.scanChar(character)) return false;
      this[_adjustLineAndColumn](character);
      return true;
    }
    readChar() {
      let character = super.readChar();
      this[_adjustLineAndColumn](character);
      return character;
    }
    [_adjustLineAndColumn](character) {
      if (character === 10 || character === 13 && this.peekChar() !== 10) {
        this[_line] = this[_line] + 1;
        this[_column] = 0;
      } else {
        this[_column] = this[_column] + (utils.inSupplementaryPlane(character) ? 2 : 1);
      }
    }
    scan(pattern) {
      if (!super.scan(pattern)) return false;
      let newlines = this[_newlinesIn](dart.nullCheck(dart.nullCheck(this.lastMatch)._get(0)), {endPosition: this.position});
      this[_line] = this[_line] + newlines[$length];
      if (newlines[$isEmpty]) {
        this[_column] = this[_column] + dart.nullCheck(dart.nullCheck(this.lastMatch)._get(0)).length;
      } else {
        this[_column] = dart.nullCheck(dart.nullCheck(this.lastMatch)._get(0)).length - newlines[$last].end;
      }
      return true;
    }
    [_newlinesIn](text, opts) {
      let endPosition = opts && 'endPosition' in opts ? opts.endPosition : null;
      let newlines = line_scanner._newlineRegExp.allMatches(text)[$toList]();
      if (endPosition < this.string.length && text[$endsWith]("\r") && this.string[$_get](endPosition) === "\n") {
        newlines[$removeLast]();
      }
      return newlines;
    }
  };
  dart.declareClass(line_scanner, 'LineScanner', _LineScanner);
  (line_scanner.LineScanner.new = function(string, opts) {
    let sourceUrl = opts && 'sourceUrl' in opts ? opts.sourceUrl : null;
    let position = opts && 'position' in opts ? opts.position : null;
    this[_line] = 0;
    this[_column] = 0;
    dart.global.Object.getPrototypeOf(line_scanner.LineScanner).new.call(this, string, {sourceUrl: sourceUrl, position: position});
    ;
  }).prototype = line_scanner.LineScanner.prototype;
  dart.lazyFn(line_scanner.LineScanner['_#new#tearOff'], () => T.String__ToLineScanner());
  dart.addRtiResources(line_scanner.LineScanner, ["string_scanner__src__line_scanner|LineScanner"]);
  dart.setMethodSignature(line_scanner.LineScanner, () => dart.global.Object.setPrototypeOf({
    [_adjustLineAndColumn]: _ti => T.intTovoid(),
    [_newlinesIn]: _ti => T.String__ToListOfMatch()
  }, dart.getMethods(dart.global.Object.getPrototypeOf(line_scanner.LineScanner))));
  dart.setMethodsImmediateTargetSignature(line_scanner.LineScanner, () => dart.global.Object.setPrototypeOf({
    scanChar: "package:string_scanner/src/line_scanner.dart:LineScanner",
    readChar: "package:string_scanner/src/line_scanner.dart:LineScanner",
    [_adjustLineAndColumn]: "package:string_scanner/src/line_scanner.dart:LineScanner",
    scan: "package:string_scanner/src/line_scanner.dart:LineScanner",
    [_newlinesIn]: "package:string_scanner/src/line_scanner.dart:LineScanner"
  }, dart.getMethodsImmediateTargets(dart.global.Object.getPrototypeOf(line_scanner.LineScanner))));
  dart.setGetterSignature(line_scanner.LineScanner, () => dart.global.Object.setPrototypeOf({
    line: _ti => T.int(),
    column: _ti => T.int(),
    state: _ti => T.LineScannerState(),
    [_betweenCRLF]: _ti => T.bool()
  }, dart.getGetters(dart.global.Object.getPrototypeOf(line_scanner.LineScanner))));
  dart.setSetterSignature(line_scanner.LineScanner, () => dart.global.Object.setPrototypeOf({
    state: _ti => T.LineScannerState()
  }, dart.getSetters(dart.global.Object.getPrototypeOf(line_scanner.LineScanner))));
  dart.setLibraryUri(line_scanner.LineScanner, I[0]);
  dart.setFieldSignature(line_scanner.LineScanner, () => dart.global.Object.setPrototypeOf({
    [_line]: {
      type: _ti => T.int(),
      isConst: false,
      isFinal: false,
      libraryUri: I[1]
    },
    [_column]: {
      type: _ti => T.int(),
      isConst: false,
      isFinal: false,
      libraryUri: I[1]
    }
  }, dart.getFields(dart.global.Object.getPrototypeOf(line_scanner.LineScanner))));
  var position = dart.privateName("package:string_scanner/src/line_scanner.dart", "LineScannerState.position");
  var line = dart.privateName("package:string_scanner/src/line_scanner.dart", "LineScannerState.line");
  var column = dart.privateName("package:string_scanner/src/line_scanner.dart", "LineScannerState.column");
  var __initializing = dart.privateName("package:string_scanner/src/line_scanner.dart", "_#initializing");
  dart.declareClass(line_scanner, 'LineScannerState', class LineScannerState {
    get position() {
      if (this[position] === __initializing) dart.throwLateInitializationError("position");
      if (this[position] === void 0) {
        this[position] = __initializing;
        try {
          this[position] = null;
        } catch (e) {
          if (this[position] === __initializing) {
            this[position] = void 0;
          }
          throw e;
        }
      }
      return this[position];
    }
    set position(value) {
      super.position = value;
    }
    get line() {
      if (this[line] === __initializing) dart.throwLateInitializationError("line");
      if (this[line] === void 0) {
        this[line] = __initializing;
        try {
          this[line] = null;
        } catch (e) {
          if (this[line] === __initializing) {
            this[line] = void 0;
          }
          throw e;
        }
      }
      return this[line];
    }
    set line(value) {
      super.line = value;
    }
    get column() {
      if (this[column] === __initializing) dart.throwLateInitializationError("column");
      if (this[column] === void 0) {
        this[column] = __initializing;
        try {
          this[column] = null;
        } catch (e) {
          if (this[column] === __initializing) {
            this[column] = void 0;
          }
          throw e;
        }
      }
      return this[column];
    }
    set column(value) {
      super.column = value;
    }
    static ['_#_#tearOff'](_scanner, position, line, column) {
      return new line_scanner.LineScannerState.__(_scanner, position, line, column);
    }
  });
  (line_scanner.LineScannerState.__ = function(_scanner$, position$, line$, column$) {
    this[_scanner] = _scanner$;
    this[position] = position$;
    this[line] = line$;
    this[column] = column$;
    ;
  }).prototype = line_scanner.LineScannerState.prototype;
  dart.lazyFn(line_scanner.LineScannerState['_#_#tearOff'], () => T.LineScannerAndintAndint__ToLineScannerState());
  dart.addRtiResources(line_scanner.LineScannerState, ["string_scanner__src__line_scanner|LineScannerState"]);
  dart.setLibraryUri(line_scanner.LineScannerState, I[0]);
  dart.setFieldSignature(line_scanner.LineScannerState, () => dart.global.Object.setPrototypeOf({
    [_scanner]: {
      type: _ti => T.LineScanner(),
      isConst: false,
      isFinal: true,
      libraryUri: I[0]
    },
    position: {
      type: _ti => T.int(),
      isConst: false,
      isFinal: true,
      libraryUri: I[1]
    },
    line: {
      type: _ti => T.int(),
      isConst: false,
      isFinal: true,
      libraryUri: I[1]
    },
    column: {
      type: _ti => T.int(),
      isConst: false,
      isFinal: true,
      libraryUri: I[1]
    }
  }, dart.getFields(dart.global.Object.getPrototypeOf(line_scanner.LineScannerState))));
  var __v__newlineRegExp = dart.privateName("package:string_scanner/src/line_scanner.dart", "_#v__newlineRegExp");
  dart.declareTopLevelProperties(line_scanner, {
    [__v__newlineRegExp]: void 0,
    /*line_scanner._newlineRegExp*/get _newlineRegExp() {
      if (this[__v__newlineRegExp] === __initializing) dart.throwLateInitializationError("_newlineRegExp");
      if (this[__v__newlineRegExp] === void 0) {
        this[__v__newlineRegExp] = __initializing;
        try {
          this[__v__newlineRegExp] = core.RegExp.new("\\n|\\r\\n|\\r(?!\\n)");
        } catch (e) {
          if (this[__v__newlineRegExp] === __initializing) {
            this[__v__newlineRegExp] = void 0;
          }
          throw e;
        }
      }
      this[__v__newlineRegExp];
      Object.defineProperty(this, "_newlineRegExp", {
        get() {
          return this[__v__newlineRegExp];
        }
      });
      return this._newlineRegExp;
    }
  });
  (function() {
  }).prototype = line_scanner;
  line_scanner[dartDevEmbedder.linkSymbol] = function link__line_scanner() {
    dart.classExtends(_LineScanner, dartDevEmbedder.importLibrary("package:string_scanner/src/string_scanner.dart").StringScanner);
    dart.classExtends(line_scanner.LineScanner, dartDevEmbedder.importLibrary("package:string_scanner/src/string_scanner.dart").StringScanner);
    dart.classExtends(line_scanner.LineScannerState, dartDevEmbedder.importLibrary("dart:core").Object);
    dart_rti._Universe.addRules(dart.typeUniverse, JSON.parse('{"string_scanner__src__line_scanner|LineScanner":{"string_scanner__src__string_scanner|StringScanner":[]},"core|String":{"Comparable.T":"core|String","core|Comparable":["core|String"],"core|Pattern":[]},"core|Comparable":{"Comparable.T":"1"},"core|int":{"core|num":[],"Comparable.T":"core|num","core|Comparable":["core|num"]},"core|num":{"Comparable.T":"core|num","core|Comparable":["core|num"]},"core|List":{"List.E":"1","Iterable.E":"1","core|Iterable":["1"],"_ListIterable.E":"1","core|_ListIterable":["1"],"EfficientLengthIterable.T":"1","_internal|EfficientLengthIterable":["1"],"HideEfficientLengthIterable.T":"1","_internal|HideEfficientLengthIterable":["1"]},"core|Iterable":{"Iterable.E":"1"},"core|_ListIterable":{"_ListIterable.E":"1","EfficientLengthIterable.T":"1","_internal|EfficientLengthIterable":["1"],"HideEfficientLengthIterable.T":"1","_internal|HideEfficientLengthIterable":["1"],"Iterable.E":"1","core|Iterable":["1"]},"_internal|EfficientLengthIterable":{"EfficientLengthIterable.T":"1","Iterable.E":"1","core|Iterable":["1"]},"_internal|HideEfficientLengthIterable":{"HideEfficientLengthIterable.T":"1","Iterable.E":"1","core|Iterable":["1"]}}'));
  };
  line_scanner[dart.libraryImportUri] = "package:string_scanner/src/line_scanner.dart";
  return line_scanner;
}));
dartDevEmbedder.debugger.setSourceMap("packages/string_scanner/src/line_scanner.dart", '{"version":3,"sourceRoot":"","sources":["line_scanner.dart"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBkB;IAAK;;AAIH;IAAO;;AAWrB,YAAiB,sCAAE,MAAM,eAAU,WAAM;IAAO;;AAI3B,YAAA,AAAa,AAAO,eAAX,CAAC,aAAa,AAAW;IAAM;cAEtC;AACzB,UAAe,AAAM,KAAD,eAAW;AAC7B,mBAAM;;AAIF,uBAAW,AAAM,KAAD;AACtB,oBAAQ,AAAM,KAAD;AACb,sBAAU,AAAM,KAAD;IACjB;iBAGiB;AACf,UAAI,AAAY,WAAD,KAAI;AACjB;;AAGI,wBAAc;AACd,uBAAW,WAAW;AAE5B,UAAI,AAAY,WAAD,KAAI;AACjB,sBAAQ;AACR,wBAAU;YACL,KAAI,WAAW,GAAG,WAAW;AAC5B,uBAAW,kBAAY,AAAO,wBAAU,WAAW,EAAE,WAAW,iBACrD,WAAW;AAC5B,oCAAS,AAAS,QAAD;AACjB,YAAI,AAAS,QAAD;AACV,2CAAW,WAAW,GAAG,WAAW;;AAI9B,oCAAsB,WAAW,GAAG,AAAS,AAAK,QAAN;AAClD,0BAAU,WAAW,GAAG,mBAAmB;;YAExC,KAAI,WAAW,GAAG,WAAW;AAC5B,wBAAW,kBAAY,AAAO,wBAAU,WAAW,EAAE,WAAW,iBACrD,WAAW;AAE5B,oCAAS,AAAS,SAAD;AACjB,YAAI,AAAS,SAAD;AACV,2CAAW,WAAW,GAAG,WAAW;;AAK9B,yBAAW,qBAAe,CAAC,IAAI;AAI/B;AACA,4BAAc,AAAO,0BACvB,6BAAgB,WAAW,QAAuB,QAAQ;AAKxD,uCAAyB,AAAY,WAAD,KAAI,CAAC,IACzC,IACA,AAAM,AAAc,AAAQ,mBAArB,WAAW,MAAK,QAAQ,AAAM,AAAkB,mBAAjB,WAAW,GAAG,OAAM,OACtD,WAAW,GAAG,IACd,WAAW,GAAG;AAExB,0BAAU,WAAW,GAAG,sBAAsB;;;IAGpD;;;;;;;;;aAKkB;AAChB,WAAW,eAAS,SAAS,GAAG,MAAO;AACvC,iCAAqB,SAAS;AAC9B,YAAO;IACT;;AAIQ,sBAAkB;AACxB,iCAAqB,SAAS;AAC9B,YAAO,UAAS;IAClB;2BAG8B;AAC5B,UAAI,AAAU,SAAD,WAAY,AAAU,SAAD,WAAW;AAC3C,oCAAS;AACT,wBAAU;;AAEV,yCAAW,2BAAqB,SAAS,IAAI,IAAI;;IAErD;SAGkB;AAChB,WAAW,WAAK,OAAO,GAAG,MAAO;AAE3B,qBAAW,kBAAyB,eAAJ,AAAC,eAAV,qBAAW,mBAAkB;AAC1D,kCAAS,AAAS,QAAD;AACjB,UAAI,AAAS,QAAD;AACV,wCAAwB,AAAE,eAAN,AAAC,eAAV,qBAAW;;AAEtB,wBAAuB,AAAE,eAAN,AAAC,eAAV,qBAAW,aAAa,AAAS,AAAK,QAAN;;AAG5C,YAAO;IACT;kBAO+B;UAAoB;AAC3C,qBAAW,AAAe,AAAiB,uCAAN,IAAI;AAG/C,UAAI,WAAW,GAAG,AAAO,sBACrB,AAAK,IAAD,YAAU,SACd,AAAM,AAAc,mBAAb,WAAW,MAAK;AAGhB,QAAT,QAAQ;;AAEV,YAAO,SAAQ;IACjB;;;2CA1DkB;QAAe;QAAiB;IAxF9C,cAAQ;IAIR,gBAAU;AAoFd,+EAAkB,MAAM,cAAS,SAAS,YAAQ,QAAQ;;EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAmElD;;;;;;;;;;;;;;;;;;IAGA;;;;;;;;;;;;;;;;;;IAGA;;;;;;;;;;;;;;;;;;;;;;+CAEc,WAAe,WAAe,OAAW;IAAzC;IAAe;IAAe;IAAW;;EAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAzKpE,2BAAc;;;;;qCAAG,gBAAO","file":"../../../../../../../../../../../packages/string_scanner/src/line_scanner.dart.lib.js"}');

//# sourceMappingURL=line_scanner.dart.lib.js.map
